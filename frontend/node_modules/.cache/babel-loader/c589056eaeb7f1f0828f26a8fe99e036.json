{"ast":null,"code":"import { resetCallDataStateInitiate, setCallerUsernameInitiate, setCallingDialogVisibleInitiate, setCallRejectedInitiate, setCallStateInitiate, setLocalStreamInitiate, setRemoteStreamInitiate } from \"../../Redux/Action/ActionCall\";\nimport { preOfferAnswers, defaultConstrains, configuration, callStates } from \"../ShareData\";\nimport store from \"../../Redux/Store\";\nimport * as wss from \"../Connect-Soket/wssConnection\";\nlet connectedUserSocketId;\nlet peerConnection;\nlet dataChannel; //Get Camera\n\nexport const getLocalStream = () => {\n  navigator.mediaDevices.getUserMedia(defaultConstrains).then(stream => {\n    store.dispatch(setLocalStreamInitiate(stream));\n    store.dispatch(setCallStateInitiate({\n      call: callStates.CALL_AVAILABLE\n    }));\n    createPeerConnection();\n  }).catch(err => {\n    console.log(\"error occured when trying to get an access to get local stream\");\n    console.log(err);\n  });\n}; //create peer connect\n\nconst createPeerConnection = () => {\n  peerConnection = new RTCPeerConnection(configuration);\n  const localStream = store.getState().call.localStream;\n\n  for (const track of localStream.getTracks()) {\n    peerConnection.addTrack(track, localStream);\n  }\n\n  peerConnection.ontrack = _ref => {\n    let {\n      streams: [stream]\n    } = _ref;\n    store.dispatch(setRemoteStreamInitiate(stream));\n  }; // incoming data channel messages\n\n\n  peerConnection.ondatachannel = event => {\n    const dataChannel = event.channel;\n\n    dataChannel.onopen = () => {\n      console.log(\"peer connection is ready to receive data channel messages\");\n    };\n\n    dataChannel.onmessage = event => {\n      store.dispatch(setMessage(true, event.data));\n    };\n  };\n\n  dataChannel = peerConnection.createDataChannel(\"chat\");\n\n  dataChannel.onopen = () => {\n    console.log(\"chat data channel succesfully opened\");\n  };\n\n  peerConnection.onicecandidate = event => {\n    console.log(\"geeting candidates from stun server\");\n\n    if (event.candidate) {\n      wss.sendWebRTCCandidate({\n        candidate: event.candidate,\n        connectedUserSocketId: connectedUserSocketId\n      });\n    }\n  };\n\n  peerConnection.onconnectionstatechange = event => {\n    if (peerConnection.connectionState === \"connected\") {\n      console.log(\"succesfully connected with other peer\");\n    }\n  };\n}; //Call\n\n\nexport const handlePreOffer = data => {\n  if (checkIfCallIsPossible()) {\n    connectedUserSocketId = data.callerSocketId;\n    store.dispatch(setCallerUsernameInitiate(data.callerUsername));\n    store.dispatch(setCallStateInitiate({\n      call: callStates.CALL_REQUESTED\n    }));\n  } else {\n    wss.sendPreOfferAnswer({\n      callerSocketId: data.callerSocketId,\n      answer: preOfferAnswers.CALL_NOT_AVAILABLE\n    });\n  }\n}; //accept call\n\nexport const acceptIncomingCallRequest = () => {\n  wss.sendPreOfferAnswer({\n    callerSocketId: connectedUserSocketId,\n    answer: preOfferAnswers.CALL_ACCEPTED\n  });\n  store.dispatch(setCallStateInitiate({\n    call: callStates.CALL_IN_PROGRESS\n  }));\n}; //reject call\n\nexport const rejectIncomingCallRequest = () => {\n  wss.sendPreOfferAnswer({\n    callerSocketId: connectedUserSocketId,\n    answer: preOfferAnswers.CALL_REJECTED\n  });\n  resetCallData();\n}; //call\n\nexport const handlePreOfferAnswer = data => {\n  store.dispatch(setCallingDialogVisibleInitiate(false));\n\n  if (data.answer === preOfferAnswers.CALL_ACCEPTED) {\n    sendOffer();\n  } else {\n    let rejectionReason;\n\n    if (data.answer === preOfferAnswers.CALL_NOT_AVAILABLE) {\n      rejectionReason = \"Callee is not able to pick up the call right now\";\n    } else {\n      rejectionReason = \"Call rejected by the callee\";\n    }\n\n    store.dispatch(setCallRejectedInitiate({\n      rejected: true,\n      reason: rejectionReason\n    }));\n    resetCallData();\n  }\n};\n\nconst sendOffer = async () => {\n  const offer = await peerConnection.createOffer();\n  await peerConnection.setLocalDescription(offer);\n  wss.sendWebRTCOffer({\n    calleeSocketId: connectedUserSocketId,\n    offer: offer\n  });\n};\n\nexport const callToOtherUser = calleeDetails => {\n  connectedUserSocketId = calleeDetails.socketId;\n  store.dispatch(setCallerUsernameInitiate(callStates.CALL_IN_PROGRESS));\n  store.dispatch(setCallingDialogVisibleInitiate({\n    data: true\n  }));\n  wss.sendPreOffer({\n    callee: calleeDetails,\n    caller: {\n      username: store.getState().user.username\n    }\n  });\n};\nexport const checkIfCallIsPossible = () => {\n  if (store.getState().call.localStream === null || store.getState().call.callState !== callStates.CALL_AVAILABLE) {\n    return false;\n  } else {\n    return true;\n  }\n}; //Function Reject\n\nexport const resetCallData = () => {\n  connectedUserSocketId = null;\n  store.dispatch(setCallStateInitiate(callStates.CALL_AVAILABLE));\n}; //show dialog\n\nexport const hangUp = () => {\n  wss.sendUserHangedUp({\n    connectedUserSocketId: connectedUserSocketId\n  });\n  console.log(\"hangup----\");\n  resetCallDataAfterHangUp();\n};\nexport const handleUserHangedUp = () => {\n  resetCallDataAfterHangUp();\n};\nexport const handleCandidate = async data => {\n  try {\n    console.log(\"adding ice candidates\");\n    await peerConnection.addIceCandidate(data.candidate);\n  } catch (err) {\n    console.error(\"error occured when trying to add received ice candidate\", err);\n  }\n};\nexport const handleOffer = async data => {\n  await peerConnection.setRemoteDescription(data.offer);\n  const answer = await peerConnection.createAnswer();\n  await peerConnection.setLocalDescription(answer);\n  wss.sendWebRTCAnswer({\n    callerSocketId: connectedUserSocketId,\n    answer: answer\n  });\n};\nexport const handleAnswer = async data => {\n  await peerConnection.setRemoteDescription(data.answer);\n};\n\nconst resetCallDataAfterHangUp = () => {\n  peerConnection.close();\n  peerConnection = null;\n  createPeerConnection();\n  resetCallData();\n  const localStream = store.getState().call.localStream;\n  localStream.getVideoTracks()[0].enabled = true;\n  localStream.getAudioTracks()[0].enabled = true; // if (store.getState().call.screenSharingActive) {\n  //   screenSharingStream.getTracks().forEach((track) => {\n  //     track.stop();\n  //   });\n  // }\n\n  store.dispatch(resetCallDataStateInitiate());\n};","map":{"version":3,"names":["resetCallDataStateInitiate","setCallerUsernameInitiate","setCallingDialogVisibleInitiate","setCallRejectedInitiate","setCallStateInitiate","setLocalStreamInitiate","setRemoteStreamInitiate","preOfferAnswers","defaultConstrains","configuration","callStates","store","wss","connectedUserSocketId","peerConnection","dataChannel","getLocalStream","navigator","mediaDevices","getUserMedia","then","stream","dispatch","call","CALL_AVAILABLE","createPeerConnection","catch","err","console","log","RTCPeerConnection","localStream","getState","track","getTracks","addTrack","ontrack","streams","ondatachannel","event","channel","onopen","onmessage","setMessage","data","createDataChannel","onicecandidate","candidate","sendWebRTCCandidate","onconnectionstatechange","connectionState","handlePreOffer","checkIfCallIsPossible","callerSocketId","callerUsername","CALL_REQUESTED","sendPreOfferAnswer","answer","CALL_NOT_AVAILABLE","acceptIncomingCallRequest","CALL_ACCEPTED","CALL_IN_PROGRESS","rejectIncomingCallRequest","CALL_REJECTED","resetCallData","handlePreOfferAnswer","sendOffer","rejectionReason","rejected","reason","offer","createOffer","setLocalDescription","sendWebRTCOffer","calleeSocketId","callToOtherUser","calleeDetails","socketId","sendPreOffer","callee","caller","username","user","callState","hangUp","sendUserHangedUp","resetCallDataAfterHangUp","handleUserHangedUp","handleCandidate","addIceCandidate","error","handleOffer","setRemoteDescription","createAnswer","sendWebRTCAnswer","handleAnswer","close","getVideoTracks","enabled","getAudioTracks"],"sources":["D:/Full-Stack-Developer/Call-Video-FullStack/frontend/src/Utils/WebRTCHandler/WebRTCHandler.js"],"sourcesContent":["import {\r\n  resetCallDataStateInitiate,\r\n  setCallerUsernameInitiate,\r\n  setCallingDialogVisibleInitiate,\r\n  setCallRejectedInitiate,\r\n  setCallStateInitiate,\r\n  setLocalStreamInitiate,\r\n  setRemoteStreamInitiate,\r\n} from \"../../Redux/Action/ActionCall\";\r\nimport {\r\n  preOfferAnswers,\r\n  defaultConstrains,\r\n  configuration,\r\n  callStates,\r\n} from \"../ShareData\";\r\nimport store from \"../../Redux/Store\";\r\nimport * as wss from \"../Connect-Soket/wssConnection\";\r\n\r\nlet connectedUserSocketId;\r\nlet peerConnection;\r\nlet dataChannel;\r\n\r\n//Get Camera\r\nexport const getLocalStream = () => {\r\n  navigator.mediaDevices\r\n    .getUserMedia(defaultConstrains)\r\n    .then((stream) => {\r\n      store.dispatch(setLocalStreamInitiate(stream));\r\n      store.dispatch(setCallStateInitiate({ call: callStates.CALL_AVAILABLE }));\r\n      createPeerConnection();\r\n    })\r\n    .catch((err) => {\r\n      console.log(\r\n        \"error occured when trying to get an access to get local stream\"\r\n      );\r\n      console.log(err);\r\n    });\r\n};\r\n//create peer connect\r\nconst createPeerConnection = () => {\r\n  peerConnection = new RTCPeerConnection(configuration);\r\n\r\n  const localStream = store.getState().call.localStream;\r\n\r\n  for (const track of localStream.getTracks()) {\r\n    peerConnection.addTrack(track, localStream);\r\n  }\r\n  peerConnection.ontrack = ({ streams: [stream] }) => {\r\n    store.dispatch(setRemoteStreamInitiate(stream));\r\n  };\r\n\r\n  // incoming data channel messages\r\n  peerConnection.ondatachannel = (event) => {\r\n    const dataChannel = event.channel;\r\n\r\n    dataChannel.onopen = () => {\r\n      console.log(\"peer connection is ready to receive data channel messages\");\r\n    };\r\n\r\n    dataChannel.onmessage = (event) => {\r\n      store.dispatch(setMessage(true, event.data));\r\n    };\r\n  };\r\n\r\n  dataChannel = peerConnection.createDataChannel(\"chat\");\r\n\r\n  dataChannel.onopen = () => {\r\n    console.log(\"chat data channel succesfully opened\");\r\n  };\r\n\r\n  peerConnection.onicecandidate = (event) => {\r\n    console.log(\"geeting candidates from stun server\");\r\n    if (event.candidate) {\r\n      wss.sendWebRTCCandidate({\r\n        candidate: event.candidate,\r\n        connectedUserSocketId: connectedUserSocketId,\r\n      });\r\n    }\r\n  };\r\n\r\n  peerConnection.onconnectionstatechange = (event) => {\r\n    if (peerConnection.connectionState === \"connected\") {\r\n      console.log(\"succesfully connected with other peer\");\r\n    }\r\n  };\r\n};\r\n//Call\r\nexport const handlePreOffer = (data) => {\r\n  if (checkIfCallIsPossible()) {\r\n    connectedUserSocketId = data.callerSocketId;\r\n    store.dispatch(setCallerUsernameInitiate(data.callerUsername));\r\n    store.dispatch(setCallStateInitiate({ call: callStates.CALL_REQUESTED }));\r\n  } else {\r\n    wss.sendPreOfferAnswer({\r\n      callerSocketId: data.callerSocketId,\r\n      answer: preOfferAnswers.CALL_NOT_AVAILABLE,\r\n    });\r\n  }\r\n};\r\n//accept call\r\nexport const acceptIncomingCallRequest = () => {\r\n  wss.sendPreOfferAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: preOfferAnswers.CALL_ACCEPTED,\r\n  });\r\n\r\n  store.dispatch(setCallStateInitiate({ call: callStates.CALL_IN_PROGRESS }));\r\n};\r\n//reject call\r\nexport const rejectIncomingCallRequest = () => {\r\n  wss.sendPreOfferAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: preOfferAnswers.CALL_REJECTED,\r\n  });\r\n  resetCallData();\r\n};\r\n//call\r\n\r\nexport const handlePreOfferAnswer = (data) => {\r\n  store.dispatch(setCallingDialogVisibleInitiate(false));\r\n\r\n  if (data.answer === preOfferAnswers.CALL_ACCEPTED) {\r\n    sendOffer();\r\n  } else {\r\n    let rejectionReason;\r\n    if (data.answer === preOfferAnswers.CALL_NOT_AVAILABLE) {\r\n      rejectionReason = \"Callee is not able to pick up the call right now\";\r\n    } else {\r\n      rejectionReason = \"Call rejected by the callee\";\r\n    }\r\n    store.dispatch(\r\n      setCallRejectedInitiate({\r\n        rejected: true,\r\n        reason: rejectionReason,\r\n      })\r\n    );\r\n\r\n    resetCallData();\r\n  }\r\n};\r\nconst sendOffer = async () => {\r\n  const offer = await peerConnection.createOffer();\r\n  await peerConnection.setLocalDescription(offer);\r\n  wss.sendWebRTCOffer({\r\n    calleeSocketId: connectedUserSocketId,\r\n    offer: offer,\r\n  });\r\n};\r\nexport const callToOtherUser = (calleeDetails) => {\r\n  connectedUserSocketId = calleeDetails.socketId;\r\n  store.dispatch(setCallerUsernameInitiate(callStates.CALL_IN_PROGRESS));\r\n  store.dispatch(setCallingDialogVisibleInitiate({ data: true }));\r\n\r\n  wss.sendPreOffer({\r\n    callee: calleeDetails,\r\n    caller: {\r\n      username: store.getState().user.username,\r\n    },\r\n  });\r\n};\r\n\r\nexport const checkIfCallIsPossible = () => {\r\n  if (\r\n    store.getState().call.localStream === null ||\r\n    store.getState().call.callState !== callStates.CALL_AVAILABLE\r\n  ) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n//Function Reject\r\nexport const resetCallData = () => {\r\n  connectedUserSocketId = null;\r\n  store.dispatch(setCallStateInitiate(callStates.CALL_AVAILABLE));\r\n};\r\n//show dialog\r\nexport const hangUp = () => {\r\n  wss.sendUserHangedUp({\r\n    connectedUserSocketId: connectedUserSocketId,\r\n  });\r\n  console.log(\"hangup----\");\r\n  resetCallDataAfterHangUp();\r\n};\r\nexport const handleUserHangedUp = () => {\r\n  resetCallDataAfterHangUp();\r\n};\r\nexport const handleCandidate = async (data) => {\r\n  try {\r\n    console.log(\"adding ice candidates\");\r\n    await peerConnection.addIceCandidate(data.candidate);\r\n  } catch (err) {\r\n    console.error(\r\n      \"error occured when trying to add received ice candidate\",\r\n      err\r\n    );\r\n  }\r\n};\r\nexport const handleOffer = async (data) => {\r\n  await peerConnection.setRemoteDescription(data.offer);\r\n  const answer = await peerConnection.createAnswer();\r\n  await peerConnection.setLocalDescription(answer);\r\n  wss.sendWebRTCAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: answer,\r\n  });\r\n};\r\nexport const handleAnswer = async (data) => {\r\n  await peerConnection.setRemoteDescription(data.answer);\r\n};\r\n\r\nconst resetCallDataAfterHangUp = () => {\r\n  peerConnection.close();\r\n  peerConnection = null;\r\n  createPeerConnection();\r\n  resetCallData();\r\n\r\n  const localStream = store.getState().call.localStream;\r\n  localStream.getVideoTracks()[0].enabled = true;\r\n  localStream.getAudioTracks()[0].enabled = true;\r\n\r\n  // if (store.getState().call.screenSharingActive) {\r\n  //   screenSharingStream.getTracks().forEach((track) => {\r\n  //     track.stop();\r\n  //   });\r\n  // }\r\n\r\n  store.dispatch(resetCallDataStateInitiate());\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}